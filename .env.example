# =============================================================================
# TRADING AUTOMATION SYSTEM - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
APP_NAME=AegisTradingAutomation
APP_ENV=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# METATRADER 5 CONFIGURATION
# -----------------------------------------------------------------------------
# Your Exness MT5 credentials
MT5_LOGIN=your_account_number
MT5_PASSWORD=your_password
MT5_SERVER=Exness-MT5Real  # or Exness-MT5Trial for demo
MT5_PATH=C:/Program Files/MetaTrader 5/terminal64.exe

# MT5 API settings (if using remote connection)
MT5_API_HOST=localhost
MT5_API_PORT=8001

# -----------------------------------------------------------------------------
# TRADING PARAMETERS
# -----------------------------------------------------------------------------
# Default symbol to trade
DEFAULT_SYMBOL=XAUUSD

# Risk management
MAX_RISK_PER_TRADE=0.01       # 1% risk per trade
MAX_DAILY_RISK=0.03           # 3% max daily risk
MAX_DRAWDOWN_PERCENT=0.10     # 10% max drawdown before shutdown
MAX_TRADES_PER_DAY=3          # Maximum trades per day
MIN_TRADE_INTERVAL_MINUTES=60 # Minimum time between trades

# Position sizing
DEFAULT_LOT_SIZE=0.01
MAX_LOT_SIZE=0.05
USE_ATR_SIZING=true
ATR_MULTIPLIER=1.5

# Session filtering (GMT times)
LONDON_SESSION_START=07:00
LONDON_SESSION_END=12:00
NY_SESSION_START=13:00
NY_SESSION_END=16:00
TRADE_SESSIONS=london,newyork  # Comma-separated: asian,london,newyork

# -----------------------------------------------------------------------------
# MTFTR STRATEGY CONFIGURATION
# -----------------------------------------------------------------------------
# Multi-Timeframe Trend Rider Strategy Settings
MTFTR_ENABLED=true

# Indicator periods
MTFTR_EMA_200=200      # 4H trend EMA
MTFTR_EMA_50=50        # 1H confirmation EMA
MTFTR_EMA_21=21        # 15M entry EMA
MTFTR_HULL_55=55       # 4H Hull MA
MTFTR_HULL_34=34       # 1H Hull MA
MTFTR_RSI_PERIOD=14
MTFTR_ATR_PERIOD=14
MTFTR_SWING_LOOKBACK=5

# Risk/Reward ratios
MTFTR_TP1_RR=1.0       # TP1 at 1:1 R:R
MTFTR_TP2_RR=2.0       # TP2 at 2:1 R:R

# Scaled exit percentages
MTFTR_TP1_CLOSE_PERCENT=0.50   # Close 50% at TP1
MTFTR_TP2_CLOSE_PERCENT=0.30   # Close 30% at TP2
MTFTR_TRAIL_PERCENT=0.20       # Trail remaining 20%

# Entry filters (RSI range)
MTFTR_MIN_RSI_LONG=40.0
MTFTR_MAX_RSI_LONG=55.0
MTFTR_MIN_RSI_SHORT=45.0
MTFTR_MAX_RSI_SHORT=60.0

# Stop loss limits (in ATR multiples)
MTFTR_MIN_SL_ATR=1.0
MTFTR_MAX_SL_ATR=3.0
MTFTR_SL_BUFFER_ATR=0.5

# Position limits
MAX_OPEN_POSITIONS=2       # Max concurrent positions
MAX_DAILY_TRADES=3         # Max trades per day
MTFTR_MAX_TRADE_HOURS=8    # Max hours per trade before time exit

# Risk limits
MAX_DAILY_LOSS_PERCENT=0.03  # Max 3% daily loss before pause
MIN_MARGIN_LEVEL=200.0       # Minimum margin level (%)

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
POSTGRES_USER=trading_user
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=trading_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Full database URL (constructed from above or override directly)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# -----------------------------------------------------------------------------
# TELEGRAM NOTIFICATIONS
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
TELEGRAM_ENABLED=true

# Notification settings
NOTIFY_ON_TRADE_OPEN=true
NOTIFY_ON_TRADE_CLOSE=true
NOTIFY_ON_DAILY_SUMMARY=true
NOTIFY_ON_ERROR=true
NOTIFY_ON_DRAWDOWN_WARNING=true

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_SECRET_KEY=your_very_long_random_secret_key_here

# TradingView webhook secret (for signal validation)
TRADINGVIEW_WEBHOOK_SECRET=your_webhook_secret_here

# -----------------------------------------------------------------------------
# MONITORING
# -----------------------------------------------------------------------------
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_password_here

# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9100

# -----------------------------------------------------------------------------
# BEHAVIORAL SAFEGUARDS
# -----------------------------------------------------------------------------
# These settings help prevent manual intervention
ENABLE_MANUAL_OVERRIDE=false           # Set to false in production!
REQUIRE_CONFIRMATION_FOR_MANUAL=true
COOLDOWN_AFTER_LOSS_MINUTES=30
MAX_CONSECUTIVE_LOSSES=3               # Pause trading after N consecutive losses
PAUSE_DURATION_HOURS=4                 # How long to pause after max losses

# -----------------------------------------------------------------------------
# BACKTESTING
# -----------------------------------------------------------------------------
BACKTEST_DATA_PATH=/app/data/historical
BACKTEST_START_DATE=2023-01-01
BACKTEST_END_DATE=2024-12-31
